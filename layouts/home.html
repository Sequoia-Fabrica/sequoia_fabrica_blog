{{ define "main" }}

{{/* Include hero section */}}
{{ partial "hero-solar" . }}

{{/* Status bar */}}
{{ partial "status-bar" . }}

<main class="article">
  <section class="homepage-section">
    <h2>Recent Posts</h2>
    <div class="post-grid">
      {{ range first 3 (where .Site.RegularPages "Type" "posts") }}
      <article class="post-card">
        {{ with .Resources.GetMatch "*.{jpg,png,gif}" }}
        <img src="{{ .RelPermalink }}" alt="{{ $.Title }}" class="post-thumbnail">
        {{ end }}
        <h3><a href="{{ .Permalink }}">{{ .Title }}</a></h3>
        <time>{{ .Date.Format "January 2, 2006" }}</time>
      </article>
      {{ end }}
    </div>
    <p><a href="/posts">View all posts &rarr;</a></p>
  </section>

  <section class="homepage-section">
    <h2>Upcoming Events</h2>
    <p>
      Check out our <a href="https://bookwhen.com/sequoiafabrica">classes and events</a>
      at Sequoia Fabrica Makerspace.
    </p>
  </section>

  <section class="homepage-section">
    <h2>Stay Connected</h2>
    <p>
      <a href="{{ .Site.Params.Newsletter }}">Join our newsletter</a> |
      <a href="{{ .Site.Params.instagram }}">Instagram</a> |
      <a href="{{ .Site.Params.mastodon }}">Mastodon</a>
    </p>
  </section>
</main>

<script>
// Initialize hero gauge with power data
document.addEventListener('DOMContentLoaded', function() {
  if (typeof PowerMonitor !== 'undefined') {
    PowerMonitor.initHeroGauge();
  }
});
</script>

{{ end }}
